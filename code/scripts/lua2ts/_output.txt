let hAbility = EntIndexToHScript(params.entindex_inflictor_const || -1)
	// - @type CDOTA_BaseNPC
	let hVictim = EntIndexToHScript(params.entindex_victim_const || -1)
	let hAttacker = EntIndexToHScript(params.entindex_attacker_const || -1)

	if ( GameFunc.IsValid(hAttacker) && hAttacker != hVictim && params.damage > 0 ) {
		let fDamage = params.damage
		let iDamageType = params.damagetype_const
		let iPlayerID = hAttacker.GetPlayerOwnerID()

		if ( PlayerResource.IsValidPlayerID(iPlayerID) ) {
			let hHero = PlayerResource.GetSelectedHeroEntity(iPlayerID)
			hAttacker = hAttacker.GetSource()
			if ( hHero != hAttacker ) {
				if ( iDamageType == DAMAGE_TYPES.DAMAGE_TYPE_NONE ) {
					iDamageType = DAMAGE_TYPES.DAMAGE_TYPE_PURE
				}
				if ( hAttacker.IsBuilding() && hAttacker.GetBuilding != null ) {
					let hBuilding = hAttacker.GetBuilding()
					let sTowerName = hBuilding.GetUnitEntityName()

					hBuilding.ModifyTotalDamage(fDamage)

					Rounds.AddRoundDamage(iPlayerID, hAttacker, sTowerName, iDamageType, fDamage)
				}
			}
		}